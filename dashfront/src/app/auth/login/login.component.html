<div class="login-wrapper d-flex justify-content-center align-items-center min-vh-100 bg-dark position-relative">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <!-- Bouton Retour à l'accueil en position absolue sur le fond -->
<button
  class="btn btn-secondary position-absolute top-3 start-3 back-button"
  (click)="goBack()"
  (mouseenter)="onHover(true)"
  (mouseleave)="onHover(false)"
  (mousedown)="onClick()"
  (mouseup)="onRelease()"
  [attr.aria-label]="'Retour à l\'accueil'"
  style="z-index: 1050;"
>
  {{ buttonText }}
</button>


  <div class="container login-container p-4 rounded shadow" style="max-width: 420px; background-color: #ffffff;">
    <div class="text-center mb-4">
      <img src="assets/frontoffice/img/Logo_Lyance.png" alt="Lyance Logo" style="max-height: 30px; margin-bottom: 1rem;" />
      <h2 class="animated-title text-dark fw-bold fs-4">
        👤 Connectez-vous à votre compte
        <span class="cursor"></span>
      </h2>
    </div>

    <form (ngSubmit)="onLogin()" #loginForm="ngForm" novalidate>
     <!-- Nom d'utilisateur avec icône 👔 -->
<div class="mb-3 position-relative advanced-input">
  <label for="username" class="form-label text-dark fw-semibold">Nom d'utilisateur</label>
  <div class="position-relative">
    <span
      class="position-absolute"
      style="top: 50%; left: 15px; transform: translateY(-50%); font-size: 1.2rem; color: #0A66C2;"
      title="Utilisateur professionnel"
      aria-label="Icône utilisateur"
    >
      🧑‍💼
    </span>
    <input
      type="text"
      id="username"
      name="username"
      class="form-control ps-5"
      [(ngModel)]="loginData.username"
      required
      minlength="3"
      #username="ngModel"
      autocomplete="username"
      [class.is-invalid]="username.invalid && username.touched"
    />
  </div>
  <div *ngIf="username.invalid && username.touched" class="text-danger small mt-1">
    <div *ngIf="username.errors?.required">Le nom d'utilisateur est requis.</div>
    <div *ngIf="username.errors?.minlength">Minimum 3 caractères.</div>
  </div>
</div>

<!-- Mot de passe avec icône 🛡️ -->
<div class="mb-3 position-relative advanced-input">
  <label for="password" class="form-label text-dark fw-semibold">Mot de passe</label>
  <div class="position-relative">
    <span
      class="position-absolute"
      style="top: 50%; left: 15px; transform: translateY(-50%); font-size: 1.2rem; color: #dc3545;"
      title="Mot de passe sécurisé"
      aria-label="Icône mot de passe"
    >
      🔒
    </span>
    <input
      [type]="showPassword ? 'text' : 'password'"
      id="password"
      name="password"
      class="form-control ps-5 pe-5"
      [(ngModel)]="loginData.password"
      required
      minlength="6"
      #password="ngModel"
      autocomplete="current-password"
      [class.is-invalid]="password.invalid && password.touched"
    />
  </div>


   <span
    class="position-absolute"
    (click)="togglePasswordVisibility()"
    style="top: 75%; right: 15px; transform: translateY(-50%); cursor: pointer; color: #000000;">
    <i class="fa" [ngClass]="showPassword ? 'fa-eye-slash' : 'fa-eye'"></i>
  </span>
  
  <div *ngIf="password.invalid && password.touched" class="text-danger small mt-1">
    <div *ngIf="password.errors?.required">Le mot de passe est requis.</div>
    <div *ngIf="password.errors?.minlength">Minimum 6 caractères.</div>
  </div>
</div>


      <!-- Bouton Se connecter -->
<button type="submit"
        class="btn custom-blue-btn w-100 fw-bold text-white"
        [disabled]="loginForm.invalid">
  Se connecter
</button>
</form>

<!-- Liens sous le formulaire -->
<div class="text-center mt-3" style="color: #000000;">
  <a
    routerLink="/forgot-password"
    class="d-flex align-items-center justify-content-center mb-2"
    style="font-size: 0.95rem; font-weight: 500; color: #010305;"  
  >
    <i  style="color: #000000;"></i> 🔐Mot de passe oublié ?
  </a>

  <span class="d-block" style="color: #000000;">Vous n'avez pas de compte ?</span> <!-- gris moyen -->
</div>


<!-- Créer un compte -->
<div class="text-center mt-2 mb-4">
  <a routerLink="/register"
     class="btn custom-blue-btn-outline fw-semibold w-75">
    Créer un compte
  </a>
</div>


    <!-- Message erreur -->
    <div *ngIf="loginError" class="alert alert-danger mt-3" role="alert">
      {{ loginError }}
    </div>

   <!-- Réseaux sociaux -->
  <div class="mt-4">
  <hr />
<p class="text-center mb-4 fw-bold fs-5 text-primary">
<p class="text-center mb-3 fw-medium" style="color: #001f4d;">
  <i class="fas fa-share-nodes me-2"></i> Connectez-vous via un réseau social
</p>
  <div class="d-flex justify-content-center gap-3">
  <!-- Réseaux sociaux en ligne (horizontale) -->
<div class="d-flex justify-content-center gap-3 mt-3 flex-wrap">

  <!-- GitHub -->
  <button
    type="button"
    class="btn d-flex align-items-center text-white px-3"
    (click)="signInWithGithub()"
    aria-label="Connexion avec GitHub"
    style="background-color: #313131;"
  >
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/github/github-original.svg"
         alt="GitHub logo"
         class="me-2"
         style="width: 20px; height: 20px;" />
    GitHub
  </button>

  <!-- Google -->
  <button
    type="button"
    class="btn d-flex align-items-center text-white px-3"
    (click)="signInWithGoogle()"
    aria-label="Connexion avec Google"
    style="background-color: #313131;"
  >
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/google/google-original.svg"
         alt="Google logo"
         class="me-2"
         style="width: 20px; height: 20px;" />
    Gmail
  </button>

  <!-- LinkedIn -->
  <button
    type="button"
    class="btn d-flex align-items-center text-white px-3"
    (click)="signInWithLinkedIn()"
    aria-label="Connexion avec LinkedIn"
    style="background-color: #313131;"
  >
    <img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/linkedin/linkedin-original.svg"
         alt="LinkedIn logo"
         class="me-2"
         style="width: 20px; height: 20px;" />
    LinkedIn
  </button>

</div>



<!-- Bootstrap Icons CDN à placer dans index.html ou angular.json -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />

<style>
  /* Gère la position des icônes dans les inputs */
  .advanced-input .form-control {
    padding-left: 2.5rem; /* espace à gauche pour l'icône */
  }
  .advanced-input .form-control.pe-5 {
    padding-right: 2.5rem; /* espace à droite pour l'icône œil */
  }

  /* Curseur pour l'icône œil */
  .bi-eye-fill, .bi-eye-slash-fill {
    cursor: pointer;
  }

  /* Style pour le bouton désactivé */
  button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  /* Petite marge entre icône et texte dans boutons sociaux */
  .social-btn .social-icon {
    width: 20px;
    height: 20px;
  }

  /* Position bouton retour */
  .position-absolute.top-3 {
    top: 1rem !important;
  }
  .position-absolute.start-3 {
    left: 1rem !important;
  }
</style>
