<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<style>

 html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}

.register-container {
  height: 100vh;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

.container-fluid,
.row,
.col-12.col-md-6.ms-auto {
  height: 100%;
  margin: 0;
  padding: 0;
}

.register-form {
  height: 100%;
  width: 100%;
  margin: 0;
  border-radius: 0 !important; /* Si tu veux pas d‚Äôarrondis */
}

.register-form .card-body {
  height: 100%;
  padding: 1.5rem;
  overflow-y: auto;
}

  /* Animation pour le titre */
  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .logo-lyance {
    max-width: 160px;
    height: auto;
    display: block;
    margin: 0 auto;
  }

  /* Icone align√©e avec largeur fixe */
  label .icon {
    display: inline-block;
    width: 1.5rem;
    text-align: center;
    margin-right: 0.5rem;
    color: #0d6efd;
    font-size: 1.25rem;
    vertical-align: middle;
  }

  .form-label {
    color: white;
    font-weight: 500;
  }

  .animated-title {
    animation: fadeInDown 1s ease-in-out;
  }

  .register-container {
    background-color: #f8f9fa;
  }

  /* Limiter la largeur du formulaire et le pousser √† droite */
  .register-form {
    max-width: 480px;
    margin-left: 0;
  }

  .bg-image-left {
  background-image: url('assets/frontoffice/img/bg-register.jpg'); /* Remplace par le bon chemin */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  height: 100%;
  position: relative;
}

/* Texte lisible sur image */
.bg-image-left h1,
.bg-image-left p {
  text-shadow: 1px 1px 4px rgba(0, 0, 0, 0.7);
}

/* Responsive : cacher sur mobile */
@media (max-width: 768px) {
  .bg-image-left {
    display: none;
  }
}
/* Forcer le scrollbar √† gauche */
.register-form .card-body {
  direction: rtl;           /* Inverse le sens du flux ‚Üí scrollbar √† gauche */
  text-align: left;         /* Remet le texte √† gauche */
  overflow-y: scroll;
  height: 100%;
  max-height: 100vh;
  padding-right: 1rem;      /* √âvite que le texte touche le bord gauche */
  padding-left: 1rem;
}

/* Re-inverser les champs pour que l‚Äô√©criture reste normale */
.register-form .card-body * {
  direction: ltr;
}



  /* Plus besoin de .form-scroll-container ni overflow-y */
</style>


<div class="register-container min-vh-100 d-flex align-items-stretch p-0 overflow-hidden">
  <div class="container-fluid h-100">
    <div class="row h-100">
      <div class="col-12 col-md-6 p-0 h-100">
        <div class="card register-form shadow border-0 rounded-0 h-100 w-100"
             style="background: linear-gradient(135deg, #037a78 0%, #06413b 50%, #006359 100%); color: rgb(0, 0, 0);">
          <div class="card-body p-4 text-start">

            <div class="text-center mb-3">
              <img src="assets/frontoffice/img/Logo_Lyance.png" alt="Lyance Logo" class="logo-lyance" />
              <h2 class="animated-title text-white fw-bold mt-2 fs-4">
                üßë‚Äçüíº Cr√©er un compte utilisateur <span class="cursor"></span>
              </h2>
            </div>

            <form (ngSubmit)="onRegister()" #registerForm="ngForm" autocomplete="off" novalidate>
              <div class="row g-3">

                <!-- Pr√©nom -->
                <div class="col-md-6">
                  <label for="firstName" class="form-label" style="color: black;">
                    <span class="icon">üë§</span> Pr√©nom
                  </label>
                  <input type="text" id="firstName" class="form-control"
                         [(ngModel)]="registerData.firstName" name="firstName" required #firstName="ngModel" />
                  <div *ngIf="firstName.invalid && firstName.touched" class="invalid-feedback d-block">
                    Le pr√©nom est requis.
                  </div>
                </div>

                <!-- Nom -->
                <div class="col-md-6">
                  <label for="lastName" class="form-label" style="color: black;">
                    <span class="icon">üë§</span> Nom
                  </label>
                  <input type="text" id="lastName" class="form-control"
                         [(ngModel)]="registerData.lastName" name="lastName" required #lastName="ngModel" />
                  <div *ngIf="lastName.invalid && lastName.touched" class="invalid-feedback d-block">
                    Le nom est requis.
                  </div>
                </div>

                <!-- Adresse -->
                <div class="col-md-6">
                  <label for="address" class="form-label" style="color: black;" >
                    <span class="icon">üè†</span> Adresse
                  </label>
                  <input type="text" id="address" class="form-control"
                         [(ngModel)]="registerData.address" name="address" required #address="ngModel" />
                  <div *ngIf="address.invalid && address.touched" class="invalid-feedback d-block">
                    L'adresse est requise.
                  </div>
                </div>

                <!-- T√©l√©phone -->
                <div class="col-md-6">
                  <label for="phoneNumber" class="form-label" style="color: black;" >
                    <span class="icon">üìû</span> T√©l√©phone
                  </label>
                  <input type="text" id="phoneNumber" class="form-control"
                         [(ngModel)]="registerData.phoneNumber" name="phoneNumber" required #phoneNumber="ngModel" />
                  <div *ngIf="phoneNumber.invalid && phoneNumber.touched" class="invalid-feedback d-block">
                    Le num√©ro est requis.
                  </div>
                </div>

                <!-- Nom d'utilisateur -->
                <div class="col-md-6">
                  <label for="username" class="form-label" style="color: black;">
                    <span class="icon">üë§</span> Nom d'utilisateur
                  </label>
                  <input type="text" id="username" class="form-control"
                         [(ngModel)]="registerData.username" name="username"
                         (blur)="checkUsernameAvailability()" required #username="ngModel" />
                  <div *ngIf="username.invalid && username.touched" class="invalid-feedback d-block">
                    Le nom d'utilisateur est requis.
                  </div>
                </div>

                <div class="col-md-6"></div>

                <!-- Email -->
                <div class="col-12">
                  <label for="email" class="form-label" style="color: black;" >
                    <span class="icon">‚úâÔ∏è</span> Email
                  </label>
                  <input type="email" id="email" class="form-control"
                         [(ngModel)]="registerData.email" name="email" required #email="ngModel" />
                  <div *ngIf="email.invalid && email.touched" class="invalid-feedback d-block">
                    Une adresse email valide est requise.
                  </div>
                </div>



<!-- R√¥les -->
<div class="col-12">
  <label for="roles" class="form-label" style="color: black;">
    <span class="icon">üõ°Ô∏è</span> R√¥le
  </label>
  <select id="roles" class="form-select" [(ngModel)]="registerData.role" name="role" required>
    <option [value]="'CANDIDAT'">Candidat</option>
    <option [value]="'PARTENAIRE_EXTERNE'">Partenaire Externe</option>
  </select>
  <div *ngIf="!registerData.role && registerForm.submitted" class="invalid-feedback d-block">
    Le r√¥le est requis.
  </div>
</div>



<!-- Mot de passe -->
<div class="col-12">
  <label for="password" class="form-label" style="color: black;">
    <span class="icon">üîí</span> Mot de passe
  </label>
  <input
    [type]="showPassword ? 'text' : 'password'"
    id="password"
    class="form-control"
    [(ngModel)]="registerData.password"
    name="password"
    (input)="checkPasswordStrength(); checkPasswordsMatch()"
    required
    #password="ngModel"
  />
  
  <!-- Barre de force -->
  <div class="progress mt-2" style="height: 8px;">
    <div
      class="progress-bar"
      role="progressbar"
      [ngClass]="passwordStrengthClass"
      [style.width.%]="passwordStrengthPercent"
      aria-valuemin="0"
      aria-valuemax="100"
    ></div>
  </div>

  <small class="text-muted ms-1 d-block" style="font-size: 0.75rem; color: #000;">
    Force : {{ passwordStrength }}
  </small>
  
  <div *ngIf="password.invalid && password.touched" class="invalid-feedback d-block">
    Le mot de passe est requis.
  </div>
</div>

<!-- Confirmation mot de passe -->
<div class="col-12">
  <label for="confirmPassword" class="form-label fw-semibold" style="color: black;">
    <span class="icon">üîí</span> Confirmer le mot de passe
  </label>
  <input
    [type]="showConfirmPassword ? 'text' : 'password'"
    id="confirmPassword"
    class="form-control"
    [(ngModel)]="registerData.confirmPassword"
    name="confirmPassword"
    (input)="checkPasswordsMatch()"
    required
    #confirmPassword="ngModel"
  />
  <div *ngIf="confirmPassword.invalid && confirmPassword.touched" class="invalid-feedback d-block">
    La confirmation est requise.
  </div>
  <div *ngIf="registerData.confirmPassword && !passwordsMatch && confirmPassword.touched" class="invalid-feedback d-block">
    Le mot de passe ne correspondent pas.
  </div>
</div>
</div>


               <!-- Bouton Se connecter -->


               <div class="d-grid mt-4">
                    <button type="submit" class="btn custom-blue-btn w-100 fw-bold text-white" [disabled]="registerForm.invalid">
                     S'inscrire
                    </button>
                </div>


              <div class="text-center mt-3">
                <a routerLink="/login" class="text-decoration-none text-white">D√©j√† un compte ? <strong>Connexion</strong></a>
              </div>
            </form>

            

          </div>
        </div>
      </div>

      <!-- Colonne gauche avec image de fond et texte -->
<div class="col-12 col-md-6 d-none d-md-flex align-items-center justify-content-center text-white bg-image-left">
  <div class="text-center px-4">
    <h1 class="display-5 fw-bold animated-title">Salut üëã</h1>
    <p class="lead fs-4">Bienvenue chez nous üéâ ! Inscrivez-vous pour commencer</p>
  </div>
</div>

    </div>
  </div>
</div>
